{"ast":null,"code":"import { EventEmitter } from \"@angular/core\";\nimport { HttpHeaders } from \"@angular/common/http\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nfunction AvatarUploadComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 4);\n    i0.…µ…µelement(1, \"img\", 5);\n    i0.…µ…µelementStart(2, \"button\", 6);\n    i0.…µ…µlistener(\"click\", function AvatarUploadComponent_div_4_Template_button_click_2_listener() {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.uploadAvatar());\n    });\n    i0.…µ…µtext(3, \"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0438\\u0442\\u0438\");\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"src\", ctx_r1.previewUrl, i0.…µ…µsanitizeUrl);\n  }\n}\nexport let AvatarUploadComponent = /*#__PURE__*/(() => {\n  class AvatarUploadComponent {\n    constructor(http) {\n      this.http = http;\n      this.selectedFile = null;\n      this.previewUrl = null;\n      this.avatarUpdated = new EventEmitter();\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files && input.files.length > 0) {\n        const file = input.files[0];\n        if (!file.name.endsWith(\".jpg\") && !file.name.endsWith(\".jpeg\")) {\n          alert(\"–î–æ–∑–≤–æ–ª–µ–Ω–æ –ª–∏—à–µ JPG-—Ñ–∞–π–ª–∏\");\n          return;\n        }\n        this.selectedFile = file;\n        const reader = new FileReader();\n        reader.onload = () => this.previewUrl = reader.result;\n        reader.readAsDataURL(file);\n      }\n    }\n    uploadAvatar() {\n      if (!this.selectedFile) return;\n      console.log(\"–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä–∞...\");\n      const formData = new FormData();\n      formData.append(\"avatar\", this.selectedFile);\n      const token = localStorage.getItem(\"token\");\n      const headers = new HttpHeaders().set(\"Authorization\", `Bearer ${token}`);\n      console.log(\"üì§ –ù–∞–¥—Å–∏–ª–∞—î–º–æ —Ñ–∞–π–ª:\", this.selectedFile);\n      this.http.post(\"http://localhost:4000/api/profile/avatar\", formData, {\n        headers\n      }).subscribe({\n        next: () => {\n          this.avatarUpdated.emit();\n          this.selectedFile = null;\n          this.previewUrl = null;\n        },\n        error: err => {\n          console.error(\"–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∞–≤–∞—Ç–∞—Ä—É:\", err);\n          alert(\"–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä.\");\n        }\n      });\n    }\n    static {\n      this.…µfac = function AvatarUploadComponent_Factory(t) {\n        return new (t || AvatarUploadComponent)(i0.…µ…µdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n        type: AvatarUploadComponent,\n        selectors: [[\"app-avatar-upload\"]],\n        outputs: {\n          avatarUpdated: \"avatarUpdated\"\n        },\n        standalone: true,\n        features: [i0.…µ…µStandaloneFeature],\n        decls: 5,\n        vars: 1,\n        consts: [[1, \"avatar-upload-container\"], [\"for\", \"avatarInput\", 1, \"file-input-label\"], [\"id\", \"avatarInput\", \"type\", \"file\", \"accept\", \".jpg,.jpeg\", \"hidden\", \"\", 3, \"change\"], [\"class\", \"preview-section\", 4, \"ngIf\"], [1, \"preview-section\"], [\"alt\", \"\\u041F\\u0440\\u0435\\u0432\\u02BC\\u044E\", 1, \"avatar-preview\", 3, \"src\"], [3, \"click\"]],\n        template: function AvatarUploadComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.…µ…µelementStart(0, \"div\", 0)(1, \"label\", 1);\n            i0.…µ…µtext(2, \" \\u041E\\u0431\\u0440\\u0430\\u0442\\u0438 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440 (.jpg) \");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(3, \"input\", 2);\n            i0.…µ…µlistener(\"change\", function AvatarUploadComponent_Template_input_change_3_listener($event) {\n              return ctx.onFileSelected($event);\n            });\n            i0.…µ…µelementEnd();\n            i0.…µ…µtemplate(4, AvatarUploadComponent_div_4_Template, 4, 1, \"div\", 3);\n            i0.…µ…µelementEnd();\n          }\n          if (rf & 2) {\n            i0.…µ…µadvance(4);\n            i0.…µ…µproperty(\"ngIf\", ctx.previewUrl);\n          }\n        },\n        styles: [\".avatar-upload-container[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.file-input-label[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#3f5fff;color:#fff;border-radius:8px;cursor:pointer;margin-bottom:10px}.preview-section[_ngcontent-%COMP%]{margin-top:15px}.avatar-preview[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%;margin-bottom:10px;border:2px solid #22df58}button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#22df58;color:#fff;border:none;border-radius:6px;cursor:pointer}\"]\n      });\n    }\n  }\n  return AvatarUploadComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}